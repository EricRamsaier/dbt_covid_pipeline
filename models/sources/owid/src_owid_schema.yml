version: 2

sources:
  - name: owid
    tags: ['external', 'covid', 'owid']
    database: raw
    schema: owid
    meta:
      owner: "eramsaier@gmail.com"
      team: "analytics_engineering"
      maturity: "high"
      source: "OWID daily CSV ingest from public GitHub"
    freshness:
      warn_after:
        count: 1
        period: day
      error_after:
        count: 2
        period: day
    tables:
      - name: owid_covid_data
        tags: ['daily', 'public', 'owid']
        description: "Our World in Data COVID-19 complete daily dataset per location"
        loaded_at_field: loaded_ts
        meta:
          source_url: "https://covid.ourworldindata.org/data/owid-covid-data.csv"
          codebook:   "https://github.com/owid/covid-19-data/blob/master/public/data/owid-covid-codebook.csv"
          loader:     raw_ingest_svc
        columns:
          - name: iso_code
            tests:
              - not_null
          - name: location
            tests:
              - not_null
          - name: date
            tests:
              - not_null
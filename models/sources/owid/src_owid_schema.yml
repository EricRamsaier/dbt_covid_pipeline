version: 2

# Define an anchor for your common freshness settings
freshness_defaults: &default_freshness
  warn_after:
    count: 7
    period: day
  error_after:
    count: 14
    period: day

sources:
  - name: owid
    database: raw
    schema: owid
    tags:
      - external
      - covid
      - owid
    meta:
      owner: "eramsaier@gmail.com" 
      team: "analytics_engineering"
      maturity: "high"
      source: "OWID daily CSV ingest from public GitHub"
    tables:
      - name: owid_covid_data
        tags:
          - external
          - covid
          - owid
        description: "Our World in Data COVID-19 complete daily dataset per location"
        loaded_at_field: loaded_ts
        freshness: *default_freshness
        meta:
          source_url: "https://covid.ourworldindata.org/data/owid-covid-data.csv"
          codebook:   "https://github.com/owid/covid-19-data/blob/master/public/data/owid-covid-codebook.csv"
          loader:     raw_ingest_svc
        columns:
          - name: iso_code
            tests:
              - not_null
          - name: date
            tests:
              - not_null
